(function(p,w){typeof exports=="object"&&typeof module<"u"?module.exports=w():typeof define=="function"&&define.amd?define(w):(p=typeof globalThis<"u"?globalThis:p||self,p["super-translator"]=w())})(this,function(){"use strict";function p(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}function w(n){if(n.__esModule)return n;var e=n.default;if(typeof e=="function"){var t=function r(){if(this instanceof r){var a=[null];a.push.apply(a,arguments);var c=Function.bind.apply(e,a);return new c}return e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(n).forEach(function(r){var a=Object.getOwnPropertyDescriptor(n,r);Object.defineProperty(t,r,a.get?a:{enumerable:!0,get:function(){return n[r]}})}),t}var E={exports:{}},x,j;function $(){if(j)return x;j=1;var n=1e3,e=n*60,t=e*60,r=t*24,a=r*7,c=r*365.25;x=function(s,i){i=i||{};var o=typeof s;if(o==="string"&&s.length>0)return m(s);if(o==="number"&&isFinite(s))return i.long?u(s):f(s);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(s))};function m(s){if(s=String(s),!(s.length>100)){var i=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(s);if(i){var o=parseFloat(i[1]),h=(i[2]||"ms").toLowerCase();switch(h){case"years":case"year":case"yrs":case"yr":case"y":return o*c;case"weeks":case"week":case"w":return o*a;case"days":case"day":case"d":return o*r;case"hours":case"hour":case"hrs":case"hr":case"h":return o*t;case"minutes":case"minute":case"mins":case"min":case"m":return o*e;case"seconds":case"second":case"secs":case"sec":case"s":return o*n;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return o;default:return}}}}function f(s){var i=Math.abs(s);return i>=r?Math.round(s/r)+"d":i>=t?Math.round(s/t)+"h":i>=e?Math.round(s/e)+"m":i>=n?Math.round(s/n)+"s":s+"ms"}function u(s){var i=Math.abs(s);return i>=r?l(s,i,r,"day"):i>=t?l(s,i,t,"hour"):i>=e?l(s,i,e,"minute"):i>=n?l(s,i,n,"second"):s+" ms"}function l(s,i,o,h){var F=i>=o*1.5;return Math.round(s/o)+" "+h+(F?"s":"")}return x}function D(n){t.debug=t,t.default=t,t.coerce=u,t.disable=c,t.enable=a,t.enabled=m,t.humanize=$(),t.destroy=l,Object.keys(n).forEach(s=>{t[s]=n[s]}),t.names=[],t.skips=[],t.formatters={};function e(s){let i=0;for(let o=0;o<s.length;o++)i=(i<<5)-i+s.charCodeAt(o),i|=0;return t.colors[Math.abs(i)%t.colors.length]}t.selectColor=e;function t(s){let i,o=null,h,F;function g(...d){if(!g.enabled)return;const y=g,v=Number(new Date),ce=v-(i||v);y.diff=ce,y.prev=i,y.curr=v,i=v,d[0]=t.coerce(d[0]),typeof d[0]!="string"&&d.unshift("%O");let _=0;d[0]=d[0].replace(/%([a-zA-Z%])/g,(S,le)=>{if(S==="%%")return"%";_++;const I=t.formatters[le];if(typeof I=="function"){const de=d[_];S=I.call(y,de),d.splice(_,1),_--}return S}),t.formatArgs.call(y,d),(y.log||t.log).apply(y,d)}return g.namespace=s,g.useColors=t.useColors(),g.color=t.selectColor(s),g.extend=r,g.destroy=t.destroy,Object.defineProperty(g,"enabled",{enumerable:!0,configurable:!1,get:()=>o!==null?o:(h!==t.namespaces&&(h=t.namespaces,F=t.enabled(s)),F),set:d=>{o=d}}),typeof t.init=="function"&&t.init(g),g}function r(s,i){const o=t(this.namespace+(typeof i>"u"?":":i)+s);return o.log=this.log,o}function a(s){t.save(s),t.namespaces=s,t.names=[],t.skips=[];let i;const o=(typeof s=="string"?s:"").split(/[\s,]+/),h=o.length;for(i=0;i<h;i++)o[i]&&(s=o[i].replace(/\*/g,".*?"),s[0]==="-"?t.skips.push(new RegExp("^"+s.slice(1)+"$")):t.names.push(new RegExp("^"+s+"$")))}function c(){const s=[...t.names.map(f),...t.skips.map(f).map(i=>"-"+i)].join(",");return t.enable(""),s}function m(s){if(s[s.length-1]==="*")return!0;let i,o;for(i=0,o=t.skips.length;i<o;i++)if(t.skips[i].test(s))return!1;for(i=0,o=t.names.length;i<o;i++)if(t.names[i].test(s))return!0;return!1}function f(s){return s.toString().substring(2,s.toString().length-2).replace(/\.\*\?$/,"*")}function u(s){return s instanceof Error?s.stack||s.message:s}function l(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return t.enable(t.load()),t}var N=D;(function(n,e){e.formatArgs=r,e.save=a,e.load=c,e.useColors=t,e.storage=m(),e.destroy=(()=>{let u=!1;return()=>{u||(u=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),e.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function t(){return typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function r(u){if(u[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+u[0]+(this.useColors?"%c ":" ")+"+"+n.exports.humanize(this.diff),!this.useColors)return;const l="color: "+this.color;u.splice(1,0,l,"color: inherit");let s=0,i=0;u[0].replace(/%[a-zA-Z%]/g,o=>{o!=="%%"&&(s++,o==="%c"&&(i=s))}),u.splice(i,0,l)}e.log=console.debug||console.log||(()=>{});function a(u){try{u?e.storage.setItem("debug",u):e.storage.removeItem("debug")}catch{}}function c(){let u;try{u=e.storage.getItem("debug")}catch{}return!u&&typeof process<"u"&&"env"in process&&(u=process.env.DEBUG),u}function m(){try{return localStorage}catch{}}n.exports=N(e);const{formatters:f}=n.exports;f.j=function(u){try{return JSON.stringify(u)}catch(l){return"[UnexpectedJSONParseError]: "+l.message}}})(E,E.exports);var q=E.exports;const M=p(q);var L=function(e){return R(e)&&!B(e)};function R(n){return!!n&&typeof n=="object"}function B(n){var e=Object.prototype.toString.call(n);return e==="[object RegExp]"||e==="[object Date]"||U(n)}var W=typeof Symbol=="function"&&Symbol.for,z=W?Symbol.for("react.element"):60103;function U(n){return n.$$typeof===z}function G(n){return Array.isArray(n)?[]:{}}function P(n,e){return e.clone!==!1&&e.isMergeableObject(n)?b(G(n),n,e):n}function k(n,e,t){return n.concat(e).map(function(r){return P(r,t)})}function V(n,e){if(!e.customMerge)return b;var t=e.customMerge(n);return typeof t=="function"?t:b}function J(n){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(n).filter(function(e){return Object.propertyIsEnumerable.call(n,e)}):[]}function A(n){return Object.keys(n).concat(J(n))}function T(n,e){try{return e in n}catch{return!1}}function H(n,e){return T(n,e)&&!(Object.hasOwnProperty.call(n,e)&&Object.propertyIsEnumerable.call(n,e))}function Y(n,e,t){var r={};return t.isMergeableObject(n)&&A(n).forEach(function(a){r[a]=P(n[a],t)}),A(e).forEach(function(a){H(n,a)||(T(n,a)&&t.isMergeableObject(e[a])?r[a]=V(a,t)(n[a],e[a],t):r[a]=P(e[a],t))}),r}function b(n,e,t){t=t||{},t.arrayMerge=t.arrayMerge||k,t.isMergeableObject=t.isMergeableObject||L,t.cloneUnlessOtherwiseSpecified=P;var r=Array.isArray(e),a=Array.isArray(n),c=r===a;return c?r?t.arrayMerge(n,e,t):Y(n,e,t):P(e,t)}b.all=function(e,t){if(!Array.isArray(e))throw new Error("first argument should be an array");return e.reduce(function(r,a){return b(r,a,t)},{})};var Z=b,K=Z;const Q=p(K);/*!
 * puppeteer-extra v3.3.5 by berstend
 * https://github.com/berstend/puppeteer-extra
 * @license MIT
 */const C=M("puppeteer-extra");class X{constructor(e,t){this._pptr=e,this._requireError=t,this._plugins=[]}use(e){return typeof e!="object"||!e._isPuppeteerExtraPlugin?(console.error("Warning: Plugin is not derived from PuppeteerExtraPlugin, ignoring.",e),this):e.name?(e.requirements.has("dataFromPlugins")&&(e.getDataFromPlugins=this.getPluginData.bind(this)),e._register(Object.getPrototypeOf(e)),this._plugins.push(e),C("plugin registered",e.name),this):(console.error("Warning: Plugin with no name registering, ignoring.",e),this)}get pptr(){if(this._pptr)return this._pptr;throw console.warn(`
    Puppeteer is missing. :-)

    Note: puppeteer is a peer dependency of puppeteer-extra,
    which means you can install your own preferred version.

    - To get the latest stable version run: 'yarn add puppeteer' or 'npm i puppeteer'

    Alternatively:
    - To get puppeteer without the bundled Chromium browser install 'puppeteer-core'
    `),this._requireError||new Error("No puppeteer instance provided.")}async launch(e){e=Q({args:[]},e||{}),this.resolvePluginDependencies(),this.orderPlugins(),e=await this.callPluginsWithValue("beforeLaunch",e);const r={context:"launch",options:e,defaultArgs:this.defaultArgs};this.checkPluginRequirements(r);const a=await this.pptr.launch(e);return this._patchPageCreationMethods(a),await this.callPlugins("_bindBrowserEvents",a,r),a}async connect(e){this.resolvePluginDependencies(),this.orderPlugins(),e=await this.callPluginsWithValue("beforeConnect",e);const t={context:"connect",options:e};this.checkPluginRequirements(t);const r=await this.pptr.connect(e);return this._patchPageCreationMethods(r),await this.callPlugins("_bindBrowserEvents",r,t),r}defaultArgs(e){return this.pptr.defaultArgs(e)}executablePath(){return this.pptr.executablePath()}createBrowserFetcher(e){return this.pptr.createBrowserFetcher(e)}_patchPageCreationMethods(e){if(!e._createPageInContext){C("warning: _patchPageCreationMethods failed (no browser._createPageInContext)");return}e._createPageInContext=function(t,r){return async function(){const a=await t.apply(r,arguments);return await a.goto("about:blank"),a}}(e._createPageInContext,e)}get plugins(){return this._plugins}get pluginNames(){return this._plugins.map(e=>e.name)}getPluginData(e){const t=this._plugins.map(r=>Array.isArray(r.data)?r.data:[r.data]).reduce((r,a)=>[...r,...a],[]);return e?t.filter(r=>r.name===e):t}getPluginsByProp(e){return this._plugins.filter(t=>e in t)}resolvePluginDependencies(){const e=this._plugins.map(t=>t._getMissingDependencies(this._plugins)).reduce((t,r)=>new Set([...t,...r]),new Set);if(!e.size){C("no dependencies are missing");return}C("dependencies missing",e);for(let t of[...e]){if(this.pluginNames.includes(t)){C(`ignoring dependency '${t}', which has been required already.`);continue}t=t.startsWith("puppeteer-extra-plugin")?t:`puppeteer-extra-plugin-${t}`;const r=t.split("/")[0];let a=null;try{a=require(t)(),this.use(a)}catch(c){throw console.warn(`
          A plugin listed '${t}' as dependency,
          which is currently missing. Please install it:

          yarn add ${r}

          Note: You don't need to require the plugin yourself,
          unless you want to modify it's default settings.
          `),c}a.dependencies.size&&this.resolvePluginDependencies()}}orderPlugins(){C("orderPlugins:before",this.pluginNames);const e=this._plugins.filter(t=>t.requirements.has("runLast")).map(t=>t.name);for(const t of e){const r=this._plugins.findIndex(a=>a.name===t);this._plugins.push(this._plugins.splice(r,1)[0])}C("orderPlugins:after",this.pluginNames)}checkPluginRequirements(e={}){for(const t of this._plugins)for(const r of t.requirements)e.context==="launch"&&r==="headful"&&e.options.headless&&console.warn(`Warning: Plugin '${t.name}' is not supported in headless mode.`),e.context==="connect"&&r==="launch"&&console.warn(`Warning: Plugin '${t.name}' doesn't support puppeteer.connect().`)}async callPlugins(e,...t){for(const r of this.getPluginsByProp(e))await r[e].apply(r,t)}async callPluginsWithValue(e,t){for(const r of this.getPluginsByProp(e)){const a=await r[e](t);a&&(t=a)}return t}}const ee=(()=>new X(...te()))();function te(){try{return[require("puppeteer"),void 0]}catch{}try{return[require("puppeteer-core"),void 0]}catch(n){return[void 0,n]}}/*!
 * puppeteer-extra-plugin v3.2.2 by berstend
 * https://github.com/berstend/puppeteer-extra/tree/master/packages/puppeteer-extra-plugin
 * @license MIT
 */const ne=require("merge-deep"),re=w(Object.freeze(Object.defineProperty({__proto__:null,PuppeteerExtraPlugin:class{constructor(e){this._debugBase=M(`puppeteer-extra-plugin:base:${this.name}`),this._childClassMembers=[],this._opts=ne(this.defaults,e||{}),this._debugBase("Initialized.")}get name(){throw new Error('Plugin must override "name"')}get defaults(){return{}}get requirements(){return new Set([])}get dependencies(){return new Set([])}get data(){return[]}get opts(){return this._opts}get debug(){return M(`puppeteer-extra-plugin:${this.name}`)}async beforeLaunch(e){}async afterLaunch(e,t={options:{}}){}async beforeConnect(e){}async afterConnect(e,t={}){}async onBrowser(e,t){}async onTargetCreated(e){}async onPageCreated(e){}async onTargetChanged(e){}async onTargetDestroyed(e){}async onDisconnected(){}async onClose(){}async onPluginRegistered(){}getDataFromPlugins(e){return[]}_getMissingDependencies(e){const t=new Set(e.map(a=>a.name));return new Set(Array.from(this.dependencies.values()).filter(a=>!t.has(a)))}async _bindBrowserEvents(e,t={}){(this._hasChildClassMember("onTargetCreated")||this._hasChildClassMember("onPageCreated"))&&e.on("targetcreated",this._onTargetCreated.bind(this)),this._hasChildClassMember("onTargetChanged")&&this.onTargetChanged&&e.on("targetchanged",this.onTargetChanged.bind(this)),this._hasChildClassMember("onTargetDestroyed")&&this.onTargetDestroyed&&e.on("targetdestroyed",this.onTargetDestroyed.bind(this)),this._hasChildClassMember("onDisconnected")&&this.onDisconnected&&e.on("disconnected",this.onDisconnected.bind(this)),t.context==="launch"&&this._hasChildClassMember("onClose")&&this.onClose&&(process.on("exit",this.onClose.bind(this)),e.on("disconnected",this.onClose.bind(this)),t.options.handleSIGINT!==!1&&process.on("SIGINT",this.onClose.bind(this)),t.options.handleSIGTERM!==!1&&process.on("SIGTERM",this.onClose.bind(this)),t.options.handleSIGHUP!==!1&&process.on("SIGHUP",this.onClose.bind(this))),t.context==="launch"&&this.afterLaunch&&await this.afterLaunch(e,t),t.context==="connect"&&this.afterConnect&&await this.afterConnect(e,t),this.onBrowser&&await this.onBrowser(e,t)}async _onTargetCreated(e){if(this.onTargetCreated&&await this.onTargetCreated(e),e.type()==="page")try{const t=await e.page();if(!t)return;const r="isClosed"in t&&!t.isClosed();this.onPageCreated&&r&&await this.onPageCreated(t)}catch(t){console.error(t)}}_register(e){this._registerChildClassMembers(e),this.onPluginRegistered&&this.onPluginRegistered()}_registerChildClassMembers(e){this._childClassMembers=Object.getOwnPropertyNames(e)}_hasChildClassMember(e){return!!this._childClassMembers.includes(e)}get _isPuppeteerExtraPlugin(){return!0}}},Symbol.toStringTag,{value:"Module"}))),{PuppeteerExtraPlugin:se}=re;class ie extends se{constructor(e={}){super(e)}get name(){return"stealth"}get defaults(){const e=new Set(["chrome.app","chrome.csi","chrome.loadTimes","chrome.runtime","defaultArgs","iframe.contentWindow","media.codecs","navigator.hardwareConcurrency","navigator.languages","navigator.permissions","navigator.plugins","navigator.webdriver","sourceurl","user-agent-override","webgl.vendor","window.outerdimensions"]);return{availableEvasions:e,enabledEvasions:new Set([...e])}}get dependencies(){return new Set([...this.opts.enabledEvasions].map(e=>`${this.name}/evasions/${e}`))}get availableEvasions(){return this.defaults.availableEvasions}get enabledEvasions(){return this.opts.enabledEvasions}set enabledEvasions(e){this.opts.enabledEvasions=e}async onBrowser(e){e&&e.setMaxListeners&&e.setMaxListeners(30)}}var ae=n=>new ie(n);const oe=p(ae);function ue(n){return n.translateFrom||"auto"}function O(n){return n.translateTo||"en"}return async(n,e={})=>{console.warn=()=>{};const t=await ee.use(oe()).launch({headless:!0,userDataDir:"./user_data"}),r=await t.newPage();await r.goto(`https://translate.google.com/?sl=${ue(e)}&tl=${O(e)}&op=translate`),await(await r.$('textarea[aria-label="Source text"]')).type(n),await r.waitForSelector(`textarea[lang="${O(e)}"]`);const c=await r.$(`textarea[lang="${O(e)}"]`),m=await r.evaluate(f=>f.value,c);return await t.close(),m}});
