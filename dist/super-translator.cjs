"use strict";function O(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}function N(n){if(n.__esModule)return n;var e=n.default;if(typeof e=="function"){var t=function r(){if(this instanceof r){var i=[null];i.push.apply(i,arguments);var c=Function.bind.apply(e,i);return new c}return e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(n).forEach(function(r){var i=Object.getOwnPropertyDescriptor(n,r);Object.defineProperty(t,r,i.get?i:{enumerable:!0,get:function(){return n[r]}})}),t}var M={exports:{}},_,A;function q(){if(A)return _;A=1;var n=1e3,e=n*60,t=e*60,r=t*24,i=r*7,c=r*365.25;_=function(s,a){a=a||{};var o=typeof s;if(o==="string"&&s.length>0)return p(s);if(o==="number"&&isFinite(s))return a.long?u(s):h(s);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(s))};function p(s){if(s=String(s),!(s.length>100)){var a=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(s);if(a){var o=parseFloat(a[1]),f=(a[2]||"ms").toLowerCase();switch(f){case"years":case"year":case"yrs":case"yr":case"y":return o*c;case"weeks":case"week":case"w":return o*i;case"days":case"day":case"d":return o*r;case"hours":case"hour":case"hrs":case"hr":case"h":return o*t;case"minutes":case"minute":case"mins":case"min":case"m":return o*e;case"seconds":case"second":case"secs":case"sec":case"s":return o*n;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return o;default:return}}}}function h(s){var a=Math.abs(s);return a>=r?Math.round(s/r)+"d":a>=t?Math.round(s/t)+"h":a>=e?Math.round(s/e)+"m":a>=n?Math.round(s/n)+"s":s+"ms"}function u(s){var a=Math.abs(s);return a>=r?l(s,a,r,"day"):a>=t?l(s,a,t,"hour"):a>=e?l(s,a,e,"minute"):a>=n?l(s,a,n,"second"):s+" ms"}function l(s,a,o,f){var w=a>=o*1.5;return Math.round(s/o)+" "+f+(w?"s":"")}return _}function L(n){t.debug=t,t.default=t,t.coerce=u,t.disable=c,t.enable=i,t.enabled=p,t.humanize=q(),t.destroy=l,Object.keys(n).forEach(s=>{t[s]=n[s]}),t.names=[],t.skips=[],t.formatters={};function e(s){let a=0;for(let o=0;o<s.length;o++)a=(a<<5)-a+s.charCodeAt(o),a|=0;return t.colors[Math.abs(a)%t.colors.length]}t.selectColor=e;function t(s){let a,o=null,f,w;function g(...d){if(!g.enabled)return;const C=g,P=Number(new Date),T=P-(a||P);C.diff=T,C.prev=a,C.curr=P,a=P,d[0]=t.coerce(d[0]),typeof d[0]!="string"&&d.unshift("%O");let F=0;d[0]=d[0].replace(/%([a-zA-Z%])/g,(v,$)=>{if(v==="%%")return"%";F++;const S=t.formatters[$];if(typeof S=="function"){const D=d[F];v=S.call(C,D),d.splice(F,1),F--}return v}),t.formatArgs.call(C,d),(C.log||t.log).apply(C,d)}return g.namespace=s,g.useColors=t.useColors(),g.color=t.selectColor(s),g.extend=r,g.destroy=t.destroy,Object.defineProperty(g,"enabled",{enumerable:!0,configurable:!1,get:()=>o!==null?o:(f!==t.namespaces&&(f=t.namespaces,w=t.enabled(s)),w),set:d=>{o=d}}),typeof t.init=="function"&&t.init(g),g}function r(s,a){const o=t(this.namespace+(typeof a>"u"?":":a)+s);return o.log=this.log,o}function i(s){t.save(s),t.namespaces=s,t.names=[],t.skips=[];let a;const o=(typeof s=="string"?s:"").split(/[\s,]+/),f=o.length;for(a=0;a<f;a++)o[a]&&(s=o[a].replace(/\*/g,".*?"),s[0]==="-"?t.skips.push(new RegExp("^"+s.slice(1)+"$")):t.names.push(new RegExp("^"+s+"$")))}function c(){const s=[...t.names.map(h),...t.skips.map(h).map(a=>"-"+a)].join(",");return t.enable(""),s}function p(s){if(s[s.length-1]==="*")return!0;let a,o;for(a=0,o=t.skips.length;a<o;a++)if(t.skips[a].test(s))return!1;for(a=0,o=t.names.length;a<o;a++)if(t.names[a].test(s))return!0;return!1}function h(s){return s.toString().substring(2,s.toString().length-2).replace(/\.\*\?$/,"*")}function u(s){return s instanceof Error?s.stack||s.message:s}function l(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return t.enable(t.load()),t}var R=L;(function(n,e){e.formatArgs=r,e.save=i,e.load=c,e.useColors=t,e.storage=p(),e.destroy=(()=>{let u=!1;return()=>{u||(u=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),e.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function t(){return typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function r(u){if(u[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+u[0]+(this.useColors?"%c ":" ")+"+"+n.exports.humanize(this.diff),!this.useColors)return;const l="color: "+this.color;u.splice(1,0,l,"color: inherit");let s=0,a=0;u[0].replace(/%[a-zA-Z%]/g,o=>{o!=="%%"&&(s++,o==="%c"&&(a=s))}),u.splice(a,0,l)}e.log=console.debug||console.log||(()=>{});function i(u){try{u?e.storage.setItem("debug",u):e.storage.removeItem("debug")}catch{}}function c(){let u;try{u=e.storage.getItem("debug")}catch{}return!u&&typeof process<"u"&&"env"in process&&(u=process.env.DEBUG),u}function p(){try{return localStorage}catch{}}n.exports=R(e);const{formatters:h}=n.exports;h.j=function(u){try{return JSON.stringify(u)}catch(l){return"[UnexpectedJSONParseError]: "+l.message}}})(M,M.exports);var B=M.exports;const x=O(B);var W=function(e){return z(e)&&!U(e)};function z(n){return!!n&&typeof n=="object"}function U(n){var e=Object.prototype.toString.call(n);return e==="[object RegExp]"||e==="[object Date]"||V(n)}var G=typeof Symbol=="function"&&Symbol.for,k=G?Symbol.for("react.element"):60103;function V(n){return n.$$typeof===k}function J(n){return Array.isArray(n)?[]:{}}function y(n,e){return e.clone!==!1&&e.isMergeableObject(n)?b(J(n),n,e):n}function H(n,e,t){return n.concat(e).map(function(r){return y(r,t)})}function Y(n,e){if(!e.customMerge)return b;var t=e.customMerge(n);return typeof t=="function"?t:b}function Z(n){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(n).filter(function(e){return Object.propertyIsEnumerable.call(n,e)}):[]}function j(n){return Object.keys(n).concat(Z(n))}function I(n,e){try{return e in n}catch{return!1}}function K(n,e){return I(n,e)&&!(Object.hasOwnProperty.call(n,e)&&Object.propertyIsEnumerable.call(n,e))}function Q(n,e,t){var r={};return t.isMergeableObject(n)&&j(n).forEach(function(i){r[i]=y(n[i],t)}),j(e).forEach(function(i){K(n,i)||(I(n,i)&&t.isMergeableObject(e[i])?r[i]=Y(i,t)(n[i],e[i],t):r[i]=y(e[i],t))}),r}function b(n,e,t){t=t||{},t.arrayMerge=t.arrayMerge||H,t.isMergeableObject=t.isMergeableObject||W,t.cloneUnlessOtherwiseSpecified=y;var r=Array.isArray(e),i=Array.isArray(n),c=r===i;return c?r?t.arrayMerge(n,e,t):Q(n,e,t):y(e,t)}b.all=function(e,t){if(!Array.isArray(e))throw new Error("first argument should be an array");return e.reduce(function(r,i){return b(r,i,t)},{})};var X=b,ee=X;const te=O(ee);/*!
 * puppeteer-extra v3.3.5 by berstend
 * https://github.com/berstend/puppeteer-extra
 * @license MIT
 */const m=x("puppeteer-extra");class ne{constructor(e,t){this._pptr=e,this._requireError=t,this._plugins=[]}use(e){return typeof e!="object"||!e._isPuppeteerExtraPlugin?(console.error("Warning: Plugin is not derived from PuppeteerExtraPlugin, ignoring.",e),this):e.name?(e.requirements.has("dataFromPlugins")&&(e.getDataFromPlugins=this.getPluginData.bind(this)),e._register(Object.getPrototypeOf(e)),this._plugins.push(e),m("plugin registered",e.name),this):(console.error("Warning: Plugin with no name registering, ignoring.",e),this)}get pptr(){if(this._pptr)return this._pptr;throw console.warn(`
    Puppeteer is missing. :-)

    Note: puppeteer is a peer dependency of puppeteer-extra,
    which means you can install your own preferred version.

    - To get the latest stable version run: 'yarn add puppeteer' or 'npm i puppeteer'

    Alternatively:
    - To get puppeteer without the bundled Chromium browser install 'puppeteer-core'
    `),this._requireError||new Error("No puppeteer instance provided.")}async launch(e){e=te({args:[]},e||{}),this.resolvePluginDependencies(),this.orderPlugins(),e=await this.callPluginsWithValue("beforeLaunch",e);const r={context:"launch",options:e,defaultArgs:this.defaultArgs};this.checkPluginRequirements(r);const i=await this.pptr.launch(e);return this._patchPageCreationMethods(i),await this.callPlugins("_bindBrowserEvents",i,r),i}async connect(e){this.resolvePluginDependencies(),this.orderPlugins(),e=await this.callPluginsWithValue("beforeConnect",e);const t={context:"connect",options:e};this.checkPluginRequirements(t);const r=await this.pptr.connect(e);return this._patchPageCreationMethods(r),await this.callPlugins("_bindBrowserEvents",r,t),r}defaultArgs(e){return this.pptr.defaultArgs(e)}executablePath(){return this.pptr.executablePath()}createBrowserFetcher(e){return this.pptr.createBrowserFetcher(e)}_patchPageCreationMethods(e){if(!e._createPageInContext){m("warning: _patchPageCreationMethods failed (no browser._createPageInContext)");return}e._createPageInContext=function(t,r){return async function(){const i=await t.apply(r,arguments);return await i.goto("about:blank"),i}}(e._createPageInContext,e)}get plugins(){return this._plugins}get pluginNames(){return this._plugins.map(e=>e.name)}getPluginData(e){const t=this._plugins.map(r=>Array.isArray(r.data)?r.data:[r.data]).reduce((r,i)=>[...r,...i],[]);return e?t.filter(r=>r.name===e):t}getPluginsByProp(e){return this._plugins.filter(t=>e in t)}resolvePluginDependencies(){const e=this._plugins.map(t=>t._getMissingDependencies(this._plugins)).reduce((t,r)=>new Set([...t,...r]),new Set);if(!e.size){m("no dependencies are missing");return}m("dependencies missing",e);for(let t of[...e]){if(this.pluginNames.includes(t)){m(`ignoring dependency '${t}', which has been required already.`);continue}t=t.startsWith("puppeteer-extra-plugin")?t:`puppeteer-extra-plugin-${t}`;const r=t.split("/")[0];let i=null;try{i=require(t)(),this.use(i)}catch(c){throw console.warn(`
          A plugin listed '${t}' as dependency,
          which is currently missing. Please install it:

          yarn add ${r}

          Note: You don't need to require the plugin yourself,
          unless you want to modify it's default settings.
          `),c}i.dependencies.size&&this.resolvePluginDependencies()}}orderPlugins(){m("orderPlugins:before",this.pluginNames);const e=this._plugins.filter(t=>t.requirements.has("runLast")).map(t=>t.name);for(const t of e){const r=this._plugins.findIndex(i=>i.name===t);this._plugins.push(this._plugins.splice(r,1)[0])}m("orderPlugins:after",this.pluginNames)}checkPluginRequirements(e={}){for(const t of this._plugins)for(const r of t.requirements)e.context==="launch"&&r==="headful"&&e.options.headless&&console.warn(`Warning: Plugin '${t.name}' is not supported in headless mode.`),e.context==="connect"&&r==="launch"&&console.warn(`Warning: Plugin '${t.name}' doesn't support puppeteer.connect().`)}async callPlugins(e,...t){for(const r of this.getPluginsByProp(e))await r[e].apply(r,t)}async callPluginsWithValue(e,t){for(const r of this.getPluginsByProp(e)){const i=await r[e](t);i&&(t=i)}return t}}const re=(()=>new ne(...se()))();function se(){try{return[require("puppeteer"),void 0]}catch{}try{return[require("puppeteer-core"),void 0]}catch(n){return[void 0,n]}}/*!
 * puppeteer-extra-plugin v3.2.2 by berstend
 * https://github.com/berstend/puppeteer-extra/tree/master/packages/puppeteer-extra-plugin
 * @license MIT
 */const ae=require("merge-deep");let ie=class{constructor(e){this._debugBase=x(`puppeteer-extra-plugin:base:${this.name}`),this._childClassMembers=[],this._opts=ae(this.defaults,e||{}),this._debugBase("Initialized.")}get name(){throw new Error('Plugin must override "name"')}get defaults(){return{}}get requirements(){return new Set([])}get dependencies(){return new Set([])}get data(){return[]}get opts(){return this._opts}get debug(){return x(`puppeteer-extra-plugin:${this.name}`)}async beforeLaunch(e){}async afterLaunch(e,t={options:{}}){}async beforeConnect(e){}async afterConnect(e,t={}){}async onBrowser(e,t){}async onTargetCreated(e){}async onPageCreated(e){}async onTargetChanged(e){}async onTargetDestroyed(e){}async onDisconnected(){}async onClose(){}async onPluginRegistered(){}getDataFromPlugins(e){return[]}_getMissingDependencies(e){const t=new Set(e.map(i=>i.name));return new Set(Array.from(this.dependencies.values()).filter(i=>!t.has(i)))}async _bindBrowserEvents(e,t={}){(this._hasChildClassMember("onTargetCreated")||this._hasChildClassMember("onPageCreated"))&&e.on("targetcreated",this._onTargetCreated.bind(this)),this._hasChildClassMember("onTargetChanged")&&this.onTargetChanged&&e.on("targetchanged",this.onTargetChanged.bind(this)),this._hasChildClassMember("onTargetDestroyed")&&this.onTargetDestroyed&&e.on("targetdestroyed",this.onTargetDestroyed.bind(this)),this._hasChildClassMember("onDisconnected")&&this.onDisconnected&&e.on("disconnected",this.onDisconnected.bind(this)),t.context==="launch"&&this._hasChildClassMember("onClose")&&this.onClose&&(process.on("exit",this.onClose.bind(this)),e.on("disconnected",this.onClose.bind(this)),t.options.handleSIGINT!==!1&&process.on("SIGINT",this.onClose.bind(this)),t.options.handleSIGTERM!==!1&&process.on("SIGTERM",this.onClose.bind(this)),t.options.handleSIGHUP!==!1&&process.on("SIGHUP",this.onClose.bind(this))),t.context==="launch"&&this.afterLaunch&&await this.afterLaunch(e,t),t.context==="connect"&&this.afterConnect&&await this.afterConnect(e,t),this.onBrowser&&await this.onBrowser(e,t)}async _onTargetCreated(e){if(this.onTargetCreated&&await this.onTargetCreated(e),e.type()==="page")try{const t=await e.page();if(!t)return;const r="isClosed"in t&&!t.isClosed();this.onPageCreated&&r&&await this.onPageCreated(t)}catch(t){console.error(t)}}_register(e){this._registerChildClassMembers(e),this.onPluginRegistered&&this.onPluginRegistered()}_registerChildClassMembers(e){this._childClassMembers=Object.getOwnPropertyNames(e)}_hasChildClassMember(e){return!!this._childClassMembers.includes(e)}get _isPuppeteerExtraPlugin(){return!0}};const oe=Object.freeze(Object.defineProperty({__proto__:null,PuppeteerExtraPlugin:ie},Symbol.toStringTag,{value:"Module"})),ue=N(oe),{PuppeteerExtraPlugin:ce}=ue;class le extends ce{constructor(e={}){super(e)}get name(){return"stealth"}get defaults(){const e=new Set(["chrome.app","chrome.csi","chrome.loadTimes","chrome.runtime","defaultArgs","iframe.contentWindow","media.codecs","navigator.hardwareConcurrency","navigator.languages","navigator.permissions","navigator.plugins","navigator.webdriver","sourceurl","user-agent-override","webgl.vendor","window.outerdimensions"]);return{availableEvasions:e,enabledEvasions:new Set([...e])}}get dependencies(){return new Set([...this.opts.enabledEvasions].map(e=>`${this.name}/evasions/${e}`))}get availableEvasions(){return this.defaults.availableEvasions}get enabledEvasions(){return this.opts.enabledEvasions}set enabledEvasions(e){this.opts.enabledEvasions=e}async onBrowser(e){e&&e.setMaxListeners&&e.setMaxListeners(30)}}const de=n=>new le(n);var ge=de;const he=O(ge);function fe(n){return n.translateFrom||"auto"}function E(n){return n.translateTo||"en"}const pe=async(n,e={})=>{console.warn=()=>{};const t=await re.use(he()).launch({headless:!0,userDataDir:"./user_data"}),r=await t.newPage();await r.goto(`https://translate.google.com/?sl=${fe(e)}&tl=${E(e)}&op=translate`),await(await r.$('textarea[aria-label="Source text"]')).type(n),await r.waitForSelector(`textarea[lang="${E(e)}"]`);const c=await r.$(`textarea[lang="${E(e)}"]`),p=await r.evaluate(h=>h.value,c);return await t.close(),p};module.exports=pe;
